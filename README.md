# OneLineEditor

## コンセプト

簡単な文字列の操作を、プログラムによって、迅速に、使いまわしできる形で、行えるエディタです。  

例えば正規表現を使って、簡単な置換を2,3回行うタスクが定期的に発生するとか、  
特定の正規表現にマッチした部分だけを抽出したいとか、  
とにかく重複を排除したいとか、  
そして上記のパターンを組み合わせて使いたい場合に、  
普通であればテキストエディタを開き、置換機能を何度も使って実現するか、  
一度ファイルの形にしたうえで、bashなどのワンライナーを書いて実現するといった操作を行っているかと思います。

このエディタは、その二つの中間のような、  
「まあ多少は複雑なんだけど、わざわざスクリプトを組むほどでもない小さなタスク」  
を軽く実現することにフォーカスしています。

## 使い方

```Ctrl+P``` => コマンドパレットが開きます。

コマンドパレットで```help```と入力し、  
```enter```キーを押下してみてください。

すると、新しいタブが開き、ヘルプが表示されます。  

このエディタは、現在開いているタブの内容を入力として受け取り、  
結果を新しいタブを開いて出力するという構造になっています。  

```help```コマンドは、入力を無視して出力としてヘルプを出すというものになるわけです。  

## 構文

### 引数

```match``` などのコマンドは、入力以外に引数を必要とします。  
その場合は、以下の二つの方法で指定してください。

#### フル

(例：「英単語+半角数字」の組み合わせだけを抽出したい場合)

``` match --with="(\w+\d+)"```

つまり、ハイフン二つ + 引数名 + ダブルクォーテーション + 内容 + ダブルクォーテーション閉じ です。  
引数の値の中でダブルクォーテーションを使いたい場合は、```""```のように二つ重ねることでエスケープが可能です。

#### ショートハンド

以下のように、短縮形が用意されています。   

``` match -w="(\w+\d+)"```

#### スイッチ

```sort```コマンドの```desc```オプションのように、trueかどうかを指定する場合は、falseの場合は指定せず、trueの場合には以下のようにスイッチを指定してください。  

``` sort --desc ```

## パイプ

「置換したあと、抽出し、ソートをかけたあと、重複を除去したい」というように、一連の流れを記述したい場合は往々にしてあるでしょう。  

その場合は、パイプが利用できます。  

以下のようなイメージです。

(例：英単語 + 数字の部分のみを抽出したあと、英単語=数字 の形に置換する。)

``` match -w="(\w+\d+)" | replace -p="(\w+?)(\d+)" -w="$1=$2"```

## お気に入りとコメント

### お気に入り機能

★ボタンを押すと、現在コマンドパレットに表示している内容をお気に入りに登録できます。  
これにより、一定のタスクを繰り返し、効率的に行うことができるようになります。  

### コメント

お気に入り機能には、タグなどの機能はありません。  
そこまでの管理を持たせる構想は今後もありません。  
あくまで、軽いタスクを効率的に行うためのツールであり、  
規模の大きなデータの管理をするなら、それはそれで別の方法をとるべきだと思っているからです。  

その代わり、```#```コマンドにより、疑似的にコメントを埋め込むことが可能です。  
```#```コマンドは、引数を必要とせず、受け取った入力をそのまま次のパイプに渡します。  

そのため、 ```#```から次の```|```までのコマンドはすべて無視されます。  

したがって、以下のような使い方が可能です。  

```# リストから抽出して置換する | match -w="(\w+\d+)" | replace -p="(\w+?)(\d+)" -w="$1=$2"```

このパイプラインは、以下と等価です。

```match -w="(\w+\d+)" | replace -p="(\w+?)(\d+)" -w="$1=$2"```